!function(e){function t(){return this instanceof t?(this.title="titanium",this.version="",this.moduleLoadList=[],this.versions={},this.arch=Ti.Platform.architecture,this.platform=Ti.Platform.osname,void(this.hardware=(""+Ti.Platform.model).replace("google_"))):new t}function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}function i(e){return this instanceof i?(e=e||{},this.timeout=5e3,this.host=e.host,this.port=e.port,this.retry=e.retry,this.bytesRead=0,this.bytesWritten=0,void(this.ignore=[])):new i(e)}function n(e){this.filename=e+".js",this.id=e,this.platform="ipad"===s.platform?"iphone":s.platform,this.exports={},this.loaded=!1}t.prototype.__proto__=r.prototype,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){o.off(e,r),t.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=function(e,t){this._callbacks=this._callbacks||{};var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;var o=r.indexOf(t._off||t);return~o&&r.splice(o,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var o=0,i=r.length;o<i;++o)r[o].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length},"undefined"!=typeof module&&(module.exports=i),i.prototype.__proto__=r.prototype,i.prototype.connect=function(e,t){var r=this;e=e||{};var o=!!e.reConnect;"function"==typeof e&&(t=e,e={}),r.host=e.host||r.host||"127.0.0.1",r.port=e.port||r.port,r.retry=e.retry||r.retry,this._proxy=Ti.Network.Socket.createTCP({host:r.host,port:r.port,connected:function(e){r.connected=!0,r._connection=e.socket,t&&t(e),r.emit(o?"reconnect":"connect",e),Ti.Stream.pump(e.socket,function(e){return e.bytesProcessed<0||e.errorStatus?(r._proxy.close(),void r.close(!0)):void r.emit("data",""+e.buffer)},1024,!0)},error:function(e){var t={code:e.errorCode,error:e.error};return~r.ignore.indexOf(t.code)?void r.emit("error ignored",t):r.emit("error",t)}}),this._proxy.connect()},i.prototype.close=function(e){var t=this;if(t.connected=!1,t.closing=!e,t.closing)return void t.write(function(){t._proxy.close(),t.emit("close")});var r=~~t.retry;t.emit("end"),r&&setTimeout(function(){t.emit("reconnecting"),t.connect({reConnect:!0})},r)},i.prototype.write=function(e,t){"function"==typeof e&&(t=e,e=null),e=e?""+e:"";var r=Ti.createBuffer({value:e}),o=t||function(){};Ti.Stream.write(this._connection,r,function(){o([].slice(arguments))})},i.prototype.setKeepAlive=function(e,t){var r=this;return e?void(r._keepAlive=setInterval(function(){r.write("ping")},t||3e5)):(r._keepAlive&&clearInterval(r._keepAlive),void(r._keepAlive=null))};var c=n._global=n.global={},s=c.process=t();c.ENV="liveview",c.logging=!1,c.CATCH_ERRORS=!0,n._cache={},n._requireNative=function(){throw new Error("Module.patch must be run first")},n._includeNative=function(){throw new Error("Module.patch must be run first")},n.patch=function(e,t,r){var o="android"===s.platform&&"sdk"===s.hardware?"10.0.2.2":"Simulator"===Ti.Platform.model?"127.0.0.1":"192.168.1.181";n._globalCtx=e,c._globalCtx=e,n._url=t||o,n._port=r||8324,n._requireNative=e.require,n.evtServer&&n.evtServer.close();try{Ti.App.Properties.setBool("ti.android.bug2373.finishfalseroot",!1)}catch(e){}e.localeStrings=n.require("localeStrings"),e.L=function(t,r){return(e.localeStrings[Ti.Locale.currentLanguage]||{})[t]||r||t},n.connectServer()},n.global.reload=function(){try{n.evtServer._proxy.close(),console.log("[LiveView] Reloading App"),Ti.App._restart()}catch(e){console.log("[LiveView] Reloading App via Legacy Method"),n.require("app")}},n.connectServer=function(){var e=null,t=n.evtServer=new i({host:n._url,port:8323},function(){console.log("[LiveView]","Connected to Event Server")});t.on("close",function(){console.log("[LiveView]","Closed Previous Event Server client")}),t.on("connect",function(){e&&(clearInterval(e),console.log("[LiveView]","Reconnected to Event Server"))}),t.on("data",function(e){if(e)try{var t=JSON.parse(""+e);"event"===t.type&&"reload"===t.name&&(n._cache={},n.global.reload())}catch(e){}}),t.on("end",function(){console.error("[LiveView]","Disconnected from Event Server"),e=setInterval(function(){console.log("[LiveView]","Attempting reconnect to Event Server"),t.connect()},2e3)}),t.on("error",function(e){var t=e.error,r=~~e.code;throw 61===r&&(t="Event Server unavailable. Connection Refused @ "+n._url+":"+n._port+"\n[LiveView] Please ensure your device and computer are on the same network and the port is not blocked."),new Error("[LiveView] "+t)}),t.connect(),n.require("app")},n.include=function(e,t){var r=t.replace(".js",""),o=n.prototype._getRemoteSource(r,1e4);eval.call(e,o)},n.require=function(e){var t=e,r=n.getCached(t);if(r)return r.exports;if(!n.exists(t)){var o="/hyperloop/";if(t.indexOf(".*")!==-1&&(t=e.slice(0,e.length-2)),n.exists(o+t))t=o+t;else if(t.indexOf(".")===-1&&n.exists(o+t+"/"+t))t=o+t+"/"+t;else{var i=t.lastIndexOf("."),c=o+t.slice(0,i)+"$"+t.slice(i+1);n.exists(t)&&(t=c)}}var s=new n(t);for(s.cache(),s._compile();!s.loaded;);return s.exports},n.getCached=function(e){return n._cache[e]},n.exists=function(e){var t=Ti.Filesystem.resourcesDirectory+e+".js",r=Ti.Filesystem.getFile(t);if(r.exists())return!0;var o=Ti.Filesystem.resourcesDirectory+"/"+this.platform+"/"+e+".js",i=Ti.Filesystem.getFile(o);return i.exists()},n.prototype._getRemoteSource=function(e,t){var r=(new Date).getTime()+t,o=Ti.Network.createHTTPClient(),i=null,c=!1,e="http://"+n._url+":"+n._port+"/"+(e||this.id)+".js";for(o.cache=!1,o.open("GET",e),o.setRequestHeader("x-platform",this.platform),o.send();!c;)if(4===o.readyState||404===o.status)i=200===o.status&&o.responseText,c=!0;else if(r-(new Date).getTime()<=0)throw i=!1,c=!0,new Error("[LiveView] File Server unavailable. Host Unreachable @ "+n._url+":"+n._port+"\n[LiveView] Please ensure your device and computer are on the same network and the port is not blocked.");return i},n.prototype._getSource=function(){var e=this.id,t=/^(http|https)$/.test(e)||"liveview"===c.ENV;if(t)return this._getRemoteSource(null,1e4);"app"===e&&(e="_app");var r=Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,e+".js");return(r.read()||{}).text},n._wrap=function(e){return e=e.replace(/T[i||itanium]+.include\([\'|\"]([^\"\'\r\n$]*)[\'|\"]\)/g,function(e,t){var r=(""+t).replace(".js",""),o=n.prototype._getRemoteSource(r,1e4),i="try{ "+o.replace(/\/\/(.*)$/gm,"").replace(/\n/g,"")+'}catch(err){ lvGlobal.process.emit("uncaughtException", {module: "'+t+'", error: err})}';return i}),c.CATCH_ERRORS?n._errWrapper[0]+e+n._errWrapper[1]:e},n._errWrapper=["try {",'} catch (err) { lvGlobal.process.emit("uncaughtException", {module: __filename, error: err, source: module.source})}'],n.prototype._compile=function(){var e=this._getSource();if(!e)return this.exports=n._requireNative(this.id),void(this.loaded=!0);this.source=n._wrap(e);try{var t=Function("exports, require, module, __filename, __dirname, lvGlobal",this.source);t(this.exports,n.require,this,this.filename,this.__dirname,c)}catch(e){s.emit("uncaughtException",{module:this.id,error:e,source:(""+this.source).split("\n")})}this.loaded=!0},n.prototype.cache=function(){this.timestamp=(new Date).getTime(),n._cache[this.id]=this},s.on("uncaughtException",function(e){console.log("[LiveView] Error Evaluating",e.module,"@ Line:",e.error.line),console.error(""+e.error),console.error("File:",e.module),console.error("Line:",e.error.line),console.error("SourceId:",e.error.sourceId),console.error("Backtrace:\n",(""+e.error.backtrace).replace(/'\n'/g,"\n"))}),n.patch(e),Titanium.App.idleTimerDisabled=!0}(this);